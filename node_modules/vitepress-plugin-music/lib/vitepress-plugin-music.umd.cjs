(function(A,a){typeof exports=="object"&&typeof module<"u"?module.exports=a(require("vue")):typeof define=="function"&&define.amd?define(["vue"],a):(A=typeof globalThis<"u"?globalThis:A||self,A.vitepressPluginMusic=a(A.vue))})(this,function(A){"use strict";var a=document.createElement("style");a.innerHTML=`@font-face{font-family:iconfont;src:url(data:font/ttf;base64,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) format("truetype")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-shouqi:before{content:"\\e655"}.icon-gedan:before{content:"\\e636"}.icon-changpianji:before{content:"\\e616"}.icon-shangyishou:before{content:"\\e718"}.icon-xiayishou:before{content:"\\e719"}@keyframes rotate{0%{transform:rotate(0)}50%{transform:rotate(180deg)}to{transform:rotate(360deg)}}@keyframes fade-in{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:.9}}.vitepress-music{position:fixed;bottom:100px;right:0;z-index:100}.vitepress-music__trigger{width:120px;height:30px;border-radius:15px 0 0 15px;cursor:pointer;background-color:var(--vp-c-bg-alt);box-shadow:0 1px 8px #0000001a,0 3px 4px #00000012,0 3px 3px -2px #0000000f;transform:translate(90px);transition:.2s transform;display:flex;align-items:center;justify-content:space-around;color:#8a8a8a}.vitepress-music__trigger:hover{transform:translate(0)}.vitepress-music__trigger span{transition:.5s;font-size:20px}.vitepress-music__trigger span:hover{color:var(--vp-c-brand)}.vitepress-music__trigger span:nth-of-type(1){animation:rotate 2s linear infinite paused}.vitepress-music__drawer{position:absolute;top:-300px;right:0;width:200px;height:300px;background-color:var(--vp-c-bg-alt);box-shadow:0 1px 8px #0000001a,0 3px 4px #00000012,0 3px 3px -2px #0000000f;font-size:12px;padding:12px 10px;transform-origin:bottom right;transform:scale(0);transition:.2s transform;border-radius:3px 0 0 3px;display:flex;flex-direction:column}.vitepress-music__drawer-header{margin-bottom:5px;display:flex;justify-content:space-between;align-items:center;color:var(--vp-c-text-2)}.vitepress-music__drawer-header div{display:flex;justify-content:space-between;align-items:center}.vitepress-music__drawer-header div .icon-shouqi{font-size:10px;margin-right:5px;cursor:pointer;transition:.5s}.vitepress-music__drawer-header div .icon-shouqi:hover{color:var(--vp-c-brand)}.vitepress-music__drawer-content{overflow:auto}.vitepress-music__drawer-content li{position:relative;display:flex;cursor:pointer;padding:2px 0;color:var(--vp-c-text-1);overflow:hidden}.vitepress-music__drawer-content li>*{flex-wrap:nowrap;flex-shrink:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.vitepress-music__drawer-content li :nth-child(1){flex-grow:1;width:0;padding-right:5px}.vitepress-music__drawer-content li :nth-child(2){width:50px;text-align:right}.vitepress-music__drawer-content li.active{color:var(--vp-c-brand)}.vitepress-music__drawer-content li.error{color:var(--vp-c-red-dimm-1);text-decoration-line:line-through}.vitepress-music__drawer-content li:hover:after{position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--vp-c-bg-alt);color:var(--vp-c-brand);text-align:center;font-style:oblique;animation:fade-in .5s forwards}.vitepress-music__drawer-content li:hover.playing:after{content:"click to pause"}.vitepress-music__drawer-content li:hover.error:after{content:"click to re-request";color:var(--vp-c-red-dimm-1)}.vitepress-music__drawer-content li:hover:not(.playing,.error):after{content:"click to play"}.vitepress-music.is-play .vitepress-music__trigger span:nth-of-type(1){color:var(--vp-c-brand);animation-play-state:running}.vitepress-music.is-show-list .vitepress-music__trigger span:nth-of-type(4){color:var(--vp-c-brand)}.vitepress-music.is-show-list .vitepress-music__drawer{transform:scale(1)}.vitepress-music audio{display:none}
`,document.head.appendChild(a);let u;const B=(s,c)=>new Promise((e,r)=>{cancelAnimationFrame(u),s.volume=c?0:1;let l=!1,d=30;const g=()=>{s.volume=Math.min(Math.max(s.volume+(c?d:-d)/1e3,0),1),l=s.volume===1||s.volume===0,l?e(s.volume):(d=Math.max(d-1,5),u=requestAnimationFrame(g))};u=requestAnimationFrame(g)}),F="",w={class:"vitepress-music__drawer"},f={class:"vitepress-music__drawer-header"},x=A.createElementVNode("span",null,"Playlist",-1),v={class:"vitepress-music__drawer-content"},C=["onClick"],y={class:"vitepress-music__trigger"},I=["src"],_=A.defineComponent({__name:"template",props:{list:null},setup(s){const c=s,e=A.ref({status:2,showList:!1,currentIndex:0,errorIndexList:[]}),r=A.computed(()=>c.list.filter(t=>!t.hide)),l=A.computed(()=>e.value.status===0),d=A.computed(()=>e.value.status===1),g=A.computed(()=>e.value.status===2),M=A.computed(()=>({"is-play":l.value,"is-pause":d.value,"is-stop":g.value,"is-show-list":e.value.showList})),b=A.computed(()=>r.value[e.value.currentIndex]),h=()=>{e.value.status=l.value?1:0},E=()=>{e.value.showList=!e.value.showList},i=A.ref(),p=t=>{if(t===e.value.currentIndex)return h();e.value.status=2,e.value.currentIndex=t<0?r.value.length-1:t>r.value.length-1?0:t,A.nextTick(()=>e.value.status=0)},Y=()=>{const{errorIndexList:t,currentIndex:n}=e.value;t.includes(n)||t.push(n),t.length<r.value.length&&p(n+1)};return A.watch(()=>e.value.status,async t=>{switch(t){case 0:i.value.play(),B(i.value,!0);break;case 1:await B(i.value,!1),i.value.pause();break;case 2:await B(i.value,!1),i.value.pause();break}}),(t,n)=>{var Q;return A.openBlock(),A.createElementBlock("div",{class:A.normalizeClass(["vitepress-music",A.unref(M)])},[A.createElementVNode("div",w,[A.createElementVNode("div",f,[A.createElementVNode("div",null,[A.createElementVNode("span",{class:"iconfont icon-shouqi",onClick:E}),x]),A.createElementVNode("span",null,"Total "+A.toDisplayString(((Q=A.unref(r))==null?void 0:Q.length)||0),1)]),A.createElementVNode("ul",v,[(A.openBlock(!0),A.createElementBlock(A.Fragment,null,A.renderList(A.unref(r),(o,m)=>(A.openBlock(),A.createElementBlock(A.Fragment,null,[o.hide?A.createCommentVNode("",!0):(A.openBlock(),A.createElementBlock("li",{key:o.name,class:A.normalizeClass({active:e.value.currentIndex===m,error:e.value.errorIndexList.includes(m),playing:A.unref(l)&&e.value.currentIndex===m}),onClick:k=>p(m)},[A.createElementVNode("div",null,A.toDisplayString(o.name),1),A.createElementVNode("div",null,A.toDisplayString(o.author),1)],10,C))],64))),256))])]),A.createElementVNode("div",y,[A.createElementVNode("span",{class:"iconfont icon-changpianji",onClick:h}),A.createElementVNode("span",{class:"iconfont icon-shangyishou",onClick:n[0]||(n[0]=o=>p(e.value.currentIndex-1))}),A.createElementVNode("span",{class:"iconfont icon-xiayishou",onClick:n[1]||(n[1]=o=>p(e.value.currentIndex+1))}),A.createElementVNode("span",{class:"iconfont icon-gedan",onClick:E})]),A.createElementVNode("audio",{ref_key:"audioRef",ref:i,src:A.unref(b).file,controls:"controls",preload:"auto",onEnded:n[2]||(n[2]=o=>p(e.value.currentIndex+1)),onError:n[3]||(n[3]=o=>Y())},null,40,I)],2)}}}),G="";return(s=[])=>{if(typeof window>"u")return;document.getElementsByTagName("body")[0];const c=A.createVNode(_,{list:s}),e=document.createElement("div");A.render(c,e),document.body.appendChild(e)}});
//# sourceMappingURL=vitepress-plugin-music.umd.cjs.map
